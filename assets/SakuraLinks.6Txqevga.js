import{_ as v}from"./SakuraImageCard.DGjj2Ais.js";import"./chunks/vue-i18n.BL0vpfZG.js";import{i as f,o as k}from"./app.4jWjdvhl.js";import"./chunks/dayjs.BdcnXKr1.js";import{z as C,x as S,B as b,w,a7 as u,ab as d,af as n,F as L,ah as q,M as B,ao as M,J as A,ag as D,ak as _,a6 as E}from"./framework.DzKjdSDt.js";function F(e,c=!1){const i=C();return S(()=>e,async()=>{let a;if(typeof e=="string"){if(!f)return;a=await fetch(e).then(l=>l.json())||[]}else{if(!f){a=e;return}a=[];const l=async t=>{try{const s=await fetch(t.rss);if(s.ok){const m=await s.text(),o=new DOMParser().parseFromString(m,"application/xml"),p=t.blog||o.querySelector("title")?.textContent,h=t.name||o.querySelector("author > name")?.textContent,g=t.url||o.querySelector('link[rel="alternate"]')?.getAttribute("href"),y=t.desc||o.querySelector("subtitle")?.textContent,x={avatar:t.avatar||o.querySelector("logo")?.textContent,name:h,url:g,color:"#EE9CA7",blog:p,desc:y};a.push(x)}else console.error(`Failed to fetch XML from ${t.rss}:`,s.status,s.statusText)}catch(s){console.error(`Error fetching XML from ${t.rss}:`,s)}};await Promise.all(e.map(l))}i.value=c?Array.from(a).sort(()=>Math.random()-.5):a},{immediate:!0}),{data:i}}const I={class:"links"},$={class:"link-items"},N=["href","title"],P={class:"link-left"},z={class:"link-info",m:"l-2"},T={class:"link-blog",font:"serif black"},V={class:"link-desc"},X=b({__name:"SakuraLinks",props:{links:{},random:{type:Boolean},errorImg:{}},setup(e){const c=e,i=k(),{data:a}=F(c.links,c.random),l=w(()=>i.value.ui.links?.image);return(t,s)=>{const m=v;return u(),d("div",I,[n("ul",$,[(u(!0),d(L,null,q(B(a),(r,o)=>(u(),d("li",{key:o,class:"link-item",style:M(`--primary-color: ${r.color}`)},[n("a",{class:"link-url",p:"x-4 y-2",href:r.url,title:r.name,alt:"portrait",rel:"friend",target:"_blank"},[n("div",P,[A(m,D({ref_for:!0},l.value,{class:"link-avatar",width:"64",height:"64",w:"16",h:"16",src:r.avatar,alt:r.name,"error-img":e.errorImg}),null,16,["src","alt","error-img"])]),n("div",z,[n("div",T,_(r.blog),1),n("div",V,_(r.desc),1)])],8,N)],4))),128))])])}}}),H=E(X,[["__scopeId","data-v-8a91ed93"]]);export{H as _};

import{_ as E}from"./SakuraPage.vue_vue_type_style_index_0_lang.C_2lPi0O.js";import{u as O}from"./chunks/vue-i18n.BL0vpfZG.js";import{s as I,f as $,a as P,b as R,d as T}from"./app.4jWjdvhl.js";import"./chunks/dayjs.BdcnXKr1.js";import{B as C,z as h,x as J,w as Y,a9 as N,a7 as a,ab as n,af as u,ak as _,M as k,F as L,ah as M,a8 as b,ay as z,an as x,ac as S,J as B,aj as A,al as F,a6 as G,ai as W,am as q}from"./framework.DzKjdSDt.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.BgduAWkd.js";import"./SakuraPageHeader.DAeAvZyc.js";import"./SakuraImageCard.DGjj2Ais.js";import"./chunks/vue-router.B9NR9R8I.js";import"./chunks/pinia.BVoyrWVf.js";/* empty css                    */import"./chunks/nprogress.DW8bJ2OO.js";const H={w:"full",class:"post-collapse mx-auto px-10 lt-sm:px-5"},K={w:"full",text:"center",class:"yun-text-light",p:"2"},Q={class:"post-collapse-action",text:"center"},U={key:0,"i-ri-sort-desc":""},X={key:1,"i-ri-sort-asc":""},Z=["id"],j={key:0,class:"post-meta absolute right-100% my-[1rem] mr-[1.2rem]"},ee={key:0,class:"post-time",font:"mono",opacity:"80"},te={class:"text-$sakura-color-text"},se={key:1,class:"post-meta my-[1rem] ml-[1.2rem]"},ae={key:0,class:"post-time text-$sakura-timeline-text-color",font:"mono",opacity:"80"},oe={class:"post-title","inline-flex":"","items-center":"",font:"serif black"},re=C({__name:"SakuraTimeLine",props:{posts:{}},setup(y){const p=y,{t:g}=O(),i=h(!0),v=h([]),m=h({}),s=h({}),d=h({});J(()=>p.posts,()=>{s.value={},v.value=[],m.value={},p.posts.forEach(t=>{if(!(t.hide&&t.hide!=="index")&&t.date){const e=Number.parseInt($(t.date,"yyyy")),r=Number.parseInt($(t.date,"MM"));s.value[e]||(v.value.push(e),m.value[e]=[],s.value[e]={}),s.value[e][r]||(m.value[e].push(r),s.value[e][r]=[],s.value[e][r].push(t)),s.value[e][r].push(t)}}),d.value=JSON.parse(JSON.stringify(s.value)),Object.keys(s.value).forEach(t=>{Object.keys(s.value[t]).forEach(e=>{s.value[t][e].length>1&&(s.value[t][e]=[s.value[t][e][0]])})})},{immediate:!0});const w=Y(()=>{const e=[...v.value].sort((r,o)=>o-r);return i.value?e:e.reverse()});function V(t){const r=[...m.value[t]].sort((o,l)=>l-o);return i.value?r:r.reverse()}function D(t,e){s.value[t][e]=[...d.value[t][e]]}return(t,e)=>{const r=N("RouterLink");return a(),n("div",H,[u("div",K,_(k(g)("counter.archives",y.posts.length)),1),u("div",Q,[u("button",{onClick:e[0]||(e[0]=o=>i.value=!i.value)},[i.value?(a(),n("div",U)):(a(),n("div",X))])]),(a(!0),n(L,null,M(w.value,o=>(a(),n("div",{key:o,class:"ml-1/3"},[u("h2",{id:`#archive-year-${o}`,class:"archive-year ml--8",text:"2xl"},_(o)+"年 ",9,Z),(a(!0),n(L,null,M(V(o),l=>(a(),b(z,{key:l,name:"timeline",tag:"ul",class:"relative p-0",onMouseenter:c=>D(o,l)},{default:x(()=>[(a(!0),n(L,null,M(k(I)(s.value[o][l],i.value),(c,f)=>(a(),n("li",{key:`post-${o}-${l}-${f}`,class:"post-item relative"},[u("header",{class:F(["post-header",[f===0?"circle-indicator":"hover-indicator",f!==s.value[o][l].length&&"h-$sakura-timeline-height"]]),flex:"","items-center":""},[f===0?(a(),n("div",j,[c.date?(a(),n("time",ee,_(k($)(c.date,"MM"))+"月 ",1)):S("v-if",!0),u("span",te," ("+_(d.value[o][l].length-1)+" 篇文章) ",1)])):S("v-if",!0),f!==0?(a(),n("div",se,[c.date?(a(),n("time",ae,_(k($)(c.date,"dd"))+"日 ",1)):S("v-if",!0),u("h2",oe,[B(r,{to:c.path||"",class:"post-title-link text-$sakura-color-text hover:text-$sakura-color-action"},{default:x(()=>[A(_(c.title),1)]),_:2},1032,["to"])])])):S("v-if",!0)],2)]))),128))]),_:2},1032,["onMouseenter"]))),128))]))),128))])}}}),ne=G(re,[["__scopeId","data-v-7e7f5f34"]]),ie=C({__name:"SakuraArchivesLayout",setup(y){const p=P();return(g,i)=>{const v=ne,m=N("RouterView"),s=E;return a(),b(s,{class:"sakura-archivers-page"},{default:x(()=>[B(m,null,{default:x(({Component:d})=>[(a(),b(W(d),null,{"main-content":x(()=>[q(g.$slots,"content",{},()=>[B(v,{posts:k(p).postList},null,8,["posts"])])]),_:3}))]),_:3})]),_:3})}}}),ye=C({__name:"archives",setup(y){return R([T({"@type":"CollectionPage"})]),(p,g)=>{const i=ie;return a(),b(i)}}});export{ye as default};
